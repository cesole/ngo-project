{"filter":false,"title":"views.py","tooltip":"/community/views.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":48,"column":12},"end":{"row":48,"column":16},"action":"insert","lines":["    "],"id":99}],[{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "],"id":100},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "],"id":101},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "],"id":102},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":55,"column":4},"end":{"row":55,"column":8},"action":"insert","lines":["    "],"id":103}],[{"start":{"row":49,"column":65},"end":{"row":49,"column":73},"action":"remove","lines":["instance"],"id":104},{"start":{"row":49,"column":65},"end":{"row":49,"column":66},"action":"remove","lines":["="]},{"start":{"row":49,"column":65},"end":{"row":49,"column":66},"action":"remove","lines":["p"]},{"start":{"row":49,"column":65},"end":{"row":49,"column":66},"action":"remove","lines":["o"]},{"start":{"row":49,"column":65},"end":{"row":49,"column":66},"action":"remove","lines":["s"]},{"start":{"row":49,"column":65},"end":{"row":49,"column":66},"action":"remove","lines":["t"]}],[{"start":{"row":49,"column":64},"end":{"row":49,"column":65},"action":"remove","lines":[" "],"id":105},{"start":{"row":49,"column":63},"end":{"row":49,"column":64},"action":"remove","lines":[","]}],[{"start":{"row":47,"column":4},"end":{"row":47,"column":8},"action":"insert","lines":["    "],"id":106}],[{"start":{"row":47,"column":8},"end":{"row":47,"column":12},"action":"insert","lines":["    "],"id":107}],[{"start":{"row":47,"column":12},"end":{"row":47,"column":16},"action":"insert","lines":["    "],"id":108}],[{"start":{"row":47,"column":16},"end":{"row":47,"column":20},"action":"insert","lines":["    "],"id":109}],[{"start":{"row":46,"column":43},"end":{"row":47,"column":74},"action":"remove","lines":["","                    #post = get_object_or_404(Post, pk=pk) if pk else None"],"id":110}],[{"start":{"row":48,"column":16},"end":{"row":48,"column":20},"action":"insert","lines":["    "],"id":111}],[{"start":{"row":54,"column":4},"end":{"row":54,"column":8},"action":"remove","lines":["    "],"id":112}],[{"start":{"row":54,"column":4},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":113},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":52,"column":12},"end":{"row":52,"column":16},"action":"remove","lines":["    "],"id":114}],[{"start":{"row":52,"column":12},"end":{"row":52,"column":16},"action":"insert","lines":["    "],"id":115}],[{"start":{"row":53,"column":54},"end":{"row":54,"column":0},"action":"insert","lines":["",""],"id":116},{"start":{"row":54,"column":0},"end":{"row":54,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":54,"column":16},"end":{"row":54,"column":20},"action":"remove","lines":["    "],"id":117},{"start":{"row":54,"column":12},"end":{"row":54,"column":16},"action":"remove","lines":["    "]}],[{"start":{"row":54,"column":8},"end":{"row":54,"column":12},"action":"remove","lines":["    "],"id":118},{"start":{"row":54,"column":4},"end":{"row":54,"column":8},"action":"remove","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"remove","lines":["    "]},{"start":{"row":53,"column":54},"end":{"row":54,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":53,"column":54},"end":{"row":54,"column":0},"action":"insert","lines":["",""],"id":119},{"start":{"row":54,"column":0},"end":{"row":54,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":54,"column":16},"end":{"row":54,"column":20},"action":"remove","lines":["    "],"id":120},{"start":{"row":54,"column":12},"end":{"row":54,"column":16},"action":"remove","lines":["    "]}],[{"start":{"row":54,"column":12},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":121},{"start":{"row":55,"column":0},"end":{"row":55,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":55,"column":12},"end":{"row":55,"column":42},"action":"insert","lines":["return HttpResponseForbidden()"],"id":122}],[{"start":{"row":55,"column":8},"end":{"row":55,"column":12},"action":"remove","lines":["    "],"id":123}],[{"start":{"row":55,"column":7},"end":{"row":55,"column":8},"action":"insert","lines":[" "],"id":125}],[{"start":{"row":55,"column":8},"end":{"row":55,"column":12},"action":"insert","lines":["    "],"id":126}],[{"start":{"row":55,"column":12},"end":{"row":55,"column":13},"action":"remove","lines":[" "],"id":127}],[{"start":{"row":57,"column":2},"end":{"row":57,"column":4},"action":"insert","lines":["  "],"id":128}],[{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"remove","lines":["    "],"id":129},{"start":{"row":56,"column":4},"end":{"row":57,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"remove","lines":[" "],"id":130},{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"remove","lines":[" "]}],[{"start":{"row":56,"column":4},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":131},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":8},"action":"insert","lines":["    "],"id":132}],[{"start":{"row":56,"column":8},"end":{"row":57,"column":0},"action":"remove","lines":["",""],"id":133},{"start":{"row":56,"column":8},"end":{"row":56,"column":12},"action":"remove","lines":["    "]}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":8},"action":"remove","lines":["    "],"id":134}],[{"start":{"row":59,"column":1},"end":{"row":80,"column":42},"action":"remove","lines":["   ","    ","    ","    ","    if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:","            if (request.user.is_superuser or","                    request.user.swimmer.graduation_year is not None):","                if request.method == \"POST\":","                    form = PostForm(request.POST, request.FILES)","                    if form.is_valid():","                        post = form.save(commit=False)","                        post.owner = request.user","                        post.save()","                        return redirect('get_posts')","                else:","                    form = PostForm()","","        except Swimmer.DoesNotExist:","            return HttpResponseForbidden()"],"id":135},{"start":{"row":59,"column":0},"end":{"row":59,"column":1},"action":"remove","lines":[" "]},{"start":{"row":58,"column":4},"end":{"row":59,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"remove","lines":["    "],"id":136}],[{"start":{"row":58,"column":0},"end":{"row":79,"column":0},"action":"insert","lines":["def new_post(request):","    if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:","            if (request.user.is_superuser or","                    request.user.swimmer.graduation_year is not None):","                if request.method == \"POST\":","                    form = PostForm(request.POST, request.FILES)","                    if form.is_valid():","                        post = form.save(commit=False)","                        post.owner = request.user","                        post.save()","                        return redirect('get_posts')","                else:","                    form = PostForm()","","        except Swimmer.DoesNotExist:","            return HttpResponseForbidden()","","    return render(request, 'posts/postform.html', {'form': form})",""],"id":137}],[{"start":{"row":63,"column":41},"end":{"row":64,"column":68},"action":"remove","lines":[" or","                    request.user.swimmer.graduation_year is not None"],"id":138}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":8},"action":"insert","lines":["    "],"id":139}],[{"start":{"row":54,"column":8},"end":{"row":54,"column":12},"action":"remove","lines":["    "],"id":140}],[{"start":{"row":54,"column":8},"end":{"row":54,"column":9},"action":"insert","lines":["e"],"id":141},{"start":{"row":54,"column":9},"end":{"row":54,"column":10},"action":"insert","lines":["l"]},{"start":{"row":54,"column":10},"end":{"row":54,"column":11},"action":"insert","lines":["s"]},{"start":{"row":54,"column":11},"end":{"row":54,"column":12},"action":"insert","lines":["e"]},{"start":{"row":54,"column":12},"end":{"row":54,"column":13},"action":"insert","lines":[":"]}],[{"start":{"row":56,"column":6},"end":{"row":56,"column":7},"action":"remove","lines":[" "],"id":142},{"start":{"row":56,"column":5},"end":{"row":56,"column":6},"action":"remove","lines":[" "]},{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"remove","lines":[" "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":56,"column":0},"end":{"row":56,"column":1},"action":"remove","lines":[" "],"id":143}],[{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "],"id":144}],[{"start":{"row":56,"column":4},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":145},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":54,"column":7},"end":{"row":54,"column":8},"action":"insert","lines":[" "],"id":146}],[{"start":{"row":54,"column":8},"end":{"row":54,"column":12},"action":"insert","lines":["    "],"id":147}],[{"start":{"row":55,"column":11},"end":{"row":55,"column":12},"action":"insert","lines":[" "],"id":148}],[{"start":{"row":55,"column":12},"end":{"row":55,"column":13},"action":"remove","lines":[" "],"id":149}],[{"start":{"row":55,"column":12},"end":{"row":55,"column":16},"action":"insert","lines":["    "],"id":150}],[{"start":{"row":54,"column":7},"end":{"row":54,"column":8},"action":"remove","lines":[" "],"id":151}],[{"start":{"row":0,"column":0},"end":{"row":160,"column":54},"action":"remove","lines":["from django.shortcuts import render, get_object_or_404, redirect","from .models import Post, Comment","from .forms import PostForm, CommentForm","from django.http import HttpResponseForbidden, HttpResponse","from django.utils import timezone","from django.contrib import messages","from django.contrib.auth.models import User","","","def get_posts(request):","    posts = Post.objects.filter(published_date__lte=timezone.now()","        ).order_by('-published_date')","    return render(request, \"cummnunity.html\", {'posts': posts})","","","def new_post(request):","    if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:","            if (request.user.is_superuser):","                if request.method == \"POST\":","                    form = PostForm(request.POST, request.FILES)","                    if form.is_valid():","                        post = form.save(commit=False)","                        post.owner = request.user","                        post.save()","                        return redirect('get_posts')","                else:","                    form = PostForm()","","        except Swimmer.DoesNotExist:","            return HttpResponseForbidden()","","    return render(request, 'posts/postform.html', {'form': form})","","","def new_comment(request, pk):","    if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:","            if (request.user.is_superuser or","                    request.user.swimmer.graduation_year is not None):","                comments = Comment.objects.all()","                post = get_object_or_404(Post, pk=pk)","                blogs = Post.objects.all()","                if request.method == \"POST\":","                    form = CommentForm(request.POST)","                    if form.is_valid():","                        comment = form.save(commit=False)","                        comment.owner = request.user","                        comment.post = post","                        comment.save()","                        return redirect('post_detail', pk=post.pk)","                else:","                    form = CommentForm()","","        except Swimmer.DoesNotExist:","            return HttpResponseForbidden()","","    return render(request, 'posts/commentform.html', {'form': form, 'blogs':","                  blogs, 'comments': comments, 'post': post})","","","def edit_post(request, pk):","    post = get_object_or_404(Post, pk=pk)","    if (request.user.is_authenticated and request.user == post.owner or","            request.user.is_superuser):","        if request.method == \"POST\":","            form = PostForm(request.POST, request.FILES, instance=post)","            if form.is_valid():","                post = form.save()","                return redirect('post_detail', post.pk)","        else:","            form = PostForm(instance=post)","    else:","        return HttpResponseForbidden()","","    return render(request, 'posts/postform.html', {'form': form})","","","def edit_comment(request, pk):","    comments = Comment.objects.all()","    blogs = Post.objects.all()","    comment = get_object_or_404(Comment, pk=pk)","    if (request.user.is_authenticated and request.user == comment.owner or","            request.user.is_superuser):","        if request.method == \"POST\":","            form = CommentForm(request.POST, request.FILES, instance=comment)","            if form.is_valid():","                comment = form.save()","                return redirect('post_detail', comment.post.id)","        else:","            form = CommentForm(instance=comment)","    else:","        return HttpResponseForbidden()","","    return render(request, 'posts/commentform.html', {'form': form, 'blogs':","                  blogs, 'comments': comments, 'post': comment.post})","","","def delete_post(request):","    id = request.POST['blogs_id']","    post = get_object_or_404(Post, id=id)","    if (request.user.is_authenticated and request.user == post.owner or","            request.user.is_superuser):","        if request.method == 'POST':","            blogs = get_object_or_404(Post, pk=id)","            try:","                blogs.delete()","                messages.success(request,","                                 'You have successfully deleted the post!')","","            except Post.DoesNotExist:","                messages.warning(request, 'The post could not be deleted.')","    else:","        return HttpResponseForbidden()","","    return redirect('get_posts')","","","def delete_comment(request):","    id = request.POST['comment_id']","    pk = request.POST['blogs_id']","    post = get_object_or_404(Post, pk=pk)","    comment = get_object_or_404(Comment, id=id)","    if (request.user.is_authenticated and request.user == comment.owner or","            request.user.is_superuser):","        if request.method == 'POST':","            try:","                comment.delete()","                messages.success(request,","                                 'You have successfully deleted the comment!')","","            except Comment.DoesNotExist:","                messages.warning(request,","                                 'The comment could not be deleted.')","    else:","        return HttpResponseForbidden()","    return redirect('get_posts')","","","def post_detail(request, pk):","    if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:","            if (request.user.is_superuser or request.user.is_authenticated and","                    request.user.swimmer.graduation_year is not None):","                blogs = Post.objects.all()","                comments = Comment.objects.all()","                post = get_object_or_404(Post, pk=pk)","                post.views += 1","                post.save()","","        except Swimmer.DoesNotExist:","            return HttpResponseForbidden()","","    return render(request, \"posts/postdetail.html\", {'blogs': blogs,","                  'comments': comments, 'post': post})"],"id":152},{"start":{"row":0,"column":0},"end":{"row":45,"column":63},"action":"insert","lines":["from django.shortcuts import render, get_object_or_404, redirect","from django.utils import timezone","from .models import Post","from .forms import BlogPostForm","","","def get_posts(request):","    \"\"\"","    Create a view that will return a list","    of Posts that were published prior to 'now'","    and render them to the 'blogposts.html' template","    \"\"\"","    posts = Post.objects.filter(published_date__lte=timezone.now()","        ).order_by('-published_date')","    return render(request, \"blogposts.html\", {'posts': posts})","","","def post_detail(request, pk):","    \"\"\"","    Create a view that returns a single","    Post object based on the post ID (pk) and","    render it to the 'postdetail.html' template.","    Or return a 404 error if the post is","    not found","    \"\"\"","    post = get_object_or_404(Post, pk=pk)","    post.views += 1","    post.save()","    return render(request, \"postdetail.html\", {'post': post})","","","def create_or_edit_post(request, pk=None):","    \"\"\"","    Create a view that allows us to create","    or edit a post depending if the Post ID","    is null or not","    \"\"\"","    post = get_object_or_404(Post, pk=pk) if pk else None","    if request.method == \"POST\":","        form = BlogPostForm(request.POST, request.FILES, instance=post)","        if form.is_valid():","            post = form.save()","            return redirect(post_detail, post.pk)","    else:","        form = BlogPostForm(instance=post)","    return render(request, 'blogpostform.html', {'form': form})"]}],[{"start":{"row":25,"column":41},"end":{"row":26,"column":19},"action":"remove","lines":["","    post.views += 1"],"id":153}],[{"start":{"row":44,"column":63},"end":{"row":45,"column":0},"action":"insert","lines":["",""],"id":154},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":4},"end":{"row":46,"column":0},"action":"insert","lines":["",""]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":4},"end":{"row":47,"column":0},"action":"insert","lines":["",""]},{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"remove","lines":["    "],"id":155},{"start":{"row":46,"column":4},"end":{"row":47,"column":0},"action":"remove","lines":["",""]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":46,"column":0},"end":{"row":47,"column":0},"action":"insert","lines":["",""],"id":156}],[{"start":{"row":47,"column":0},"end":{"row":68,"column":0},"action":"insert","lines":["def new_post(request):","    if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:","            if (request.user.is_superuser or","                    request.user.swimmer.graduation_year is not None):","                if request.method == \"POST\":","                    form = PostForm(request.POST, request.FILES)","                    if form.is_valid():","                        post = form.save(commit=False)","                        post.owner = request.user","                        post.save()","                        return redirect('get_posts')","                else:","                    form = PostForm()","","        except Swimmer.DoesNotExist:","            return HttpResponseForbidden()","","    return render(request, 'posts/postform.html', {'form': form})",""],"id":157}],[{"start":{"row":35,"column":7},"end":{"row":36,"column":0},"action":"insert","lines":["",""],"id":158},{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":36,"column":4},"end":{"row":36,"column":5},"action":"insert","lines":["i"],"id":159}],[{"start":{"row":36,"column":4},"end":{"row":36,"column":5},"action":"remove","lines":["i"],"id":160}],[{"start":{"row":36,"column":4},"end":{"row":39,"column":12},"action":"insert","lines":["if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:"],"id":161}],[{"start":{"row":40,"column":0},"end":{"row":40,"column":4},"action":"insert","lines":["    "],"id":162},{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":39,"column":12},"end":{"row":40,"column":0},"action":"insert","lines":["",""],"id":163},{"start":{"row":40,"column":0},"end":{"row":40,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":40,"column":12},"end":{"row":40,"column":40},"action":"insert","lines":["if (request.user.is_superuse"],"id":164}],[{"start":{"row":40,"column":40},"end":{"row":40,"column":41},"action":"insert","lines":["r"],"id":165},{"start":{"row":40,"column":41},"end":{"row":40,"column":42},"action":"insert","lines":[")"]},{"start":{"row":40,"column":42},"end":{"row":40,"column":43},"action":"insert","lines":[":"]}],[{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "],"id":166},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "],"id":167},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "],"id":168},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "],"id":169},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "],"id":170},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":48,"column":54},"end":{"row":49,"column":0},"action":"insert","lines":["",""],"id":171},{"start":{"row":49,"column":0},"end":{"row":49,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":49,"column":16},"end":{"row":49,"column":20},"action":"remove","lines":["    "],"id":172},{"start":{"row":49,"column":12},"end":{"row":49,"column":16},"action":"remove","lines":["    "]},{"start":{"row":49,"column":8},"end":{"row":49,"column":12},"action":"remove","lines":["    "]}],[{"start":{"row":49,"column":8},"end":{"row":50,"column":42},"action":"insert","lines":["except Swimmer.DoesNotExist:","            return HttpResponseForbidden()"],"id":173}],[{"start":{"row":49,"column":8},"end":{"row":50,"column":0},"action":"insert","lines":["",""],"id":174},{"start":{"row":50,"column":0},"end":{"row":50,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":50,"column":15},"end":{"row":50,"column":22},"action":"remove","lines":["Swimmer"],"id":175},{"start":{"row":50,"column":15},"end":{"row":50,"column":16},"action":"insert","lines":["u"]},{"start":{"row":50,"column":16},"end":{"row":50,"column":17},"action":"insert","lines":["s"]},{"start":{"row":50,"column":17},"end":{"row":50,"column":18},"action":"insert","lines":["e"]},{"start":{"row":50,"column":18},"end":{"row":50,"column":19},"action":"insert","lines":["r"]}],[{"start":{"row":52,"column":4},"end":{"row":53,"column":0},"action":"insert","lines":["",""],"id":176},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":56,"column":0},"end":{"row":77,"column":0},"action":"remove","lines":["def new_post(request):","    if not request.user.is_authenticated:","        return redirect('login')","    else:","        try:","            if (request.user.is_superuser or","                    request.user.swimmer.graduation_year is not None):","                if request.method == \"POST\":","                    form = PostForm(request.POST, request.FILES)","                    if form.is_valid():","                        post = form.save(commit=False)","                        post.owner = request.user","                        post.save()","                        return redirect('get_posts')","                else:","                    form = PostForm()","","        except Swimmer.DoesNotExist:","            return HttpResponseForbidden()","","    return render(request, 'posts/postform.html', {'form': form})",""],"id":177},{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"remove","lines":["",""]},{"start":{"row":54,"column":4},"end":{"row":55,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"remove","lines":["    "],"id":178},{"start":{"row":53,"column":63},"end":{"row":54,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":2,"column":24},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":179}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":59},"action":"insert","lines":["from django.http import HttpResponseForbidden, HttpResponse"],"id":180}],[{"start":{"row":51,"column":15},"end":{"row":51,"column":16},"action":"insert","lines":["s"],"id":181},{"start":{"row":51,"column":16},"end":{"row":51,"column":17},"action":"insert","lines":["u"]},{"start":{"row":51,"column":17},"end":{"row":51,"column":18},"action":"insert","lines":["p"]},{"start":{"row":51,"column":18},"end":{"row":51,"column":19},"action":"insert","lines":["e"]},{"start":{"row":51,"column":19},"end":{"row":51,"column":20},"action":"insert","lines":["r"]}],[{"start":{"row":51,"column":8},"end":{"row":51,"column":14},"action":"remove","lines":["except"],"id":182},{"start":{"row":51,"column":8},"end":{"row":51,"column":9},"action":"insert","lines":["e"]},{"start":{"row":51,"column":9},"end":{"row":51,"column":10},"action":"insert","lines":["l"]},{"start":{"row":51,"column":10},"end":{"row":51,"column":11},"action":"insert","lines":["s"]},{"start":{"row":51,"column":11},"end":{"row":51,"column":12},"action":"insert","lines":["e"]},{"start":{"row":51,"column":12},"end":{"row":51,"column":13},"action":"insert","lines":[":"]}],[{"start":{"row":51,"column":14},"end":{"row":51,"column":37},"action":"remove","lines":["superuser.DoesNotExist:"],"id":183},{"start":{"row":51,"column":13},"end":{"row":51,"column":14},"action":"remove","lines":[" "]}],[{"start":{"row":51,"column":8},"end":{"row":51,"column":12},"action":"insert","lines":["    "],"id":184}],[{"start":{"row":52,"column":12},"end":{"row":52,"column":16},"action":"insert","lines":["    "],"id":185}],[{"start":{"row":54,"column":4},"end":{"row":54,"column":8},"action":"insert","lines":["    "],"id":186}],[{"start":{"row":54,"column":4},"end":{"row":54,"column":8},"action":"remove","lines":["    "],"id":187}],[{"start":{"row":40,"column":0},"end":{"row":40,"column":12},"action":"remove","lines":["        try:"],"id":188},{"start":{"row":39,"column":9},"end":{"row":40,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":50,"column":2},"end":{"row":51,"column":46},"action":"remove","lines":["          else:","                return HttpResponseForbidden()"],"id":189}],[{"start":{"row":40,"column":8},"end":{"row":40,"column":12},"action":"remove","lines":["    "],"id":190}],[{"start":{"row":41,"column":8},"end":{"row":41,"column":12},"action":"remove","lines":["    "],"id":191}],[{"start":{"row":42,"column":8},"end":{"row":42,"column":12},"action":"remove","lines":["    "],"id":192}],[{"start":{"row":43,"column":8},"end":{"row":43,"column":12},"action":"remove","lines":["    "],"id":193}],[{"start":{"row":44,"column":8},"end":{"row":44,"column":12},"action":"remove","lines":["    "],"id":194}],[{"start":{"row":45,"column":8},"end":{"row":45,"column":12},"action":"remove","lines":["    "],"id":195}],[{"start":{"row":46,"column":8},"end":{"row":46,"column":12},"action":"remove","lines":["    "],"id":196}],[{"start":{"row":47,"column":8},"end":{"row":47,"column":12},"action":"remove","lines":["    "],"id":197}],[{"start":{"row":48,"column":8},"end":{"row":48,"column":12},"action":"remove","lines":["    "],"id":198}],[{"start":{"row":50,"column":2},"end":{"row":51,"column":4},"action":"remove","lines":["","    "],"id":199},{"start":{"row":50,"column":2},"end":{"row":51,"column":0},"action":"remove","lines":["",""]},{"start":{"row":50,"column":2},"end":{"row":50,"column":3},"action":"remove","lines":[" "]}],[{"start":{"row":50,"column":2},"end":{"row":50,"column":3},"action":"remove","lines":[" "],"id":200}]]},"ace":{"folds":[],"scrolltop":130.5,"scrollleft":0,"selection":{"start":{"row":38,"column":8},"end":{"row":38,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1572879214607,"hash":"a39cda214bf8b317894d6ee9adfd07a40a5c11e5"}